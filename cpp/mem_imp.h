#ifndef MEM_IMP_H__12_10_2022__17_05
#define MEM_IMP_H__12_10_2022__17_05

#include "mem.h"

//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

template <int L> List< MEMB<L> > MEMB<L>::_freeList;

//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

#define MEMBS MEMB<SMALL_BUF_LEN>
#define MEMBM MEMB<MEDIUM_BUF_LEN>
#define MEMBH MEMB<HUGE_BUF_LEN>

static MEMBS	small_buffer[NUM_SMALL_BUF];
static MEMBM	medium_buffer[NUM_MEDIUM_BUF];
static MEMBH	huge_buffer[NUM_HUGE_BUF];

//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Ptr<MB> GetSmallBuffer()
{
	return MEMBS::Alloc();
}

//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Ptr<MB> GetMediumBuffer()
{
	return MEMBM::Alloc();
}

//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Ptr<MB> GetHugeBuffer()
{
	return MEMBH::Alloc();
}

//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Ptr<MB> GetMemBuffer(u32 minLen)
{
	if (minLen > MEDIUM_BUF_LEN)
	{
		return GetHugeBuffer();
	}
	else if (minLen > SMALL_BUF_LEN)
	{
		return GetMediumBuffer();
	}
	else
	{
		return GetSmallBuffer();
	};
}

//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

#endif // MEM_IMP_H__12_10_2022__17_05
